(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{952:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/mint",function(){return n(4944)}])},4944:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),i=n(1664),s=n.n(i),a=n(4358);function c(){return(0,r.jsxs)("div",{className:"flex justify-between items-center text-white text-sm bg-gray rounded-md h-10 py-2 px-5 -mt-4 mb-12",children:[(0,r.jsx)("div",{className:"uppercase",children:"Administrator View"}),(0,r.jsx)(s(),{href:a.Hb.root,passHref:!0,children:(0,r.jsxs)("a",{className:"flex items-center hover:opacity-80",children:[(0,r.jsx)("span",{className:"mr-3",children:"Back to user view"}),(0,r.jsx)("img",{src:"/images/arrow-right-b.svg",alt:"Flow",width:15,height:15})]})})]})}var o=n(828),u=n(484),d=n(1667),l=n(1163),f=n(7294),m=n(7496),g=n(9656),x=n(4333);var h=n(4115),v=n(8100),p=n(5917);function y(){var e=(0,m.Z)().addTransaction,t=(0,o.Z)(function(){var e=(0,f.useReducer)(x.wO,x.E3),t=e[0],n=e[1],r=(0,f.useRef)();return(0,f.useEffect)((function(){return function(){var e;null===(e=r.current)||void 0===e||e.abort()}}),[]),[t,function(e){var t,i=e.url,s=e.method,a=e.data,c=e.onSuccess,o=e.onError;null===(t=r.current)||void 0===t||t.abort(),r.current=new AbortController,fetch(i,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:r.current.signal}).then((function(e){return e.json()})).then((function(e){r.current=void 0,n({type:x.MR,payload:e}),"function"===typeof c&&c(e)})).catch((function(e){n({type:x.pn}),"function"===typeof o&&o(e)}))}]}(),2),n=(t[0],t[1]),r=(0,f.useRef)(),i=(0,f.useRef)(),s=(0,l.useRouter)(),c=(0,v.kY)().mutate,u=(0,f.useState)(!1),y=u[0],j=u[1],b=(0,f.useState)(null),w=b[0],N=b[1],k=y?"Minting Item":"Processing",M=function(){j(!1),N(null)};return(0,f.useEffect)((function(){return function(){r.current&&r.current(),clearTimeout(i.current)}}),[]),[{isLoading:y,transactionAction:k,transactionStatus:w},function(){j(!0);var t=g.Z.flowAddress;n({url:g.Z.apiKittyItemMintAndList,method:"POST",data:{recipient:t},onSuccess:function(t){j(!0);var n=null===t||void 0===t?void 0:t.transaction;if(!n)throw new Error("Missing transactionId");e({id:n,title:"Minting new item"}),r.current=d.tx(n).subscribe((function(e){N(e.status),d.tx.isSealed(e)&&function(e){var t,n,r;if(null===(t=e.errorMessage)||void 0===t?void 0:t.length)M();else{var o=(0,h.jB)(e.events,h.vZ);if(!(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.id))throw new Error("Minting error, missing itemID");if(!(null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.kind))throw new Error("Minting error, missing kind");i.current=setTimeout((function(){c(a.Hb.apiMarketItemsList()),s.push({pathname:a.Hb.profileItem(g.Z.flowAddress,o.data.id)})}),1e3)}}(e)})),p.Z.track("kitty-items-item-minted",{params:{mint:t}})},onError:function(){M()}})}]}var j=n(5697),b=n.n(j),w=n(3802),N=n(5809),k=Object.keys(a.MI).length;function M(e){var t=e.isLoading;return(0,r.jsxs)(r.Fragment,{children:[!t&&(0,r.jsx)(R,{}),(0,r.jsx)(I,{isLoading:t})]})}function I(e){var t=e.isLoading,n=(0,f.useRef)(),i=function(){return Math.floor(Math.random()*k)},s=(0,f.useState)(1),a=s[0],c=s[1],o=(0,f.useCallback)((function(){c((function(e){for(var t=i();t===e;)t=i();return t}))}),[]);(0,f.useEffect)((function(){return t?n.current=setInterval(o,350):n.current&&clearInterval(n.current),function(){n.current&&clearInterval(n.current)}}),[t,o]);var u=Array(k).fill(0).map((function(e,t){return t}));return(0,r.jsx)(r.Fragment,{children:u.map((function(e,n){return(0,r.jsx)(E,{index:n,kind:e,isHidden:!t||e!==a},n)}))})}function R(){var e="/images/kitty-items/question-gray-lg.png",t="".concat(e,", ").concat("/images/kitty-items/question-gray-lg@2x.png"," 2x");return(0,r.jsx)("div",{className:"group relative ".concat((0,w.P)("gray")," rounded-3xl relative flex w-full items-center justify-center"),children:(0,r.jsx)("img",{src:e,srcSet:t,alt:"Mint a Kitty Item"})})}function S(e,t){var n=a.MI[e];return"/images/kitty-items/".concat((0,N.Z)(n),"-blue-lg").concat(t?"@2x":"",".png")}function E(e){var t=e.kind,n=e.isHidden,i=S(t,!1),s=S(t,!0),a="".concat(i,", ").concat(s," 2x"),c="group relative ".concat((0,w.P)(0)," ").concat(n?"hidden":""," rounded-3xl relative flex w-full items-center justify-center");return(0,r.jsx)("div",{className:c,children:(0,r.jsx)("img",{src:i,srcSet:a,alt:"Mint a Kitty Item"})})}M.propTypes={isLoading:b().bool.isRequired},I.propTypes={isLoading:b().bool.isRequired},S.propTypes={kind:b().number.isRequired,is2X:b().bool.isRequired},E.propTypes={kind:b().number.isRequired,isHidden:b().bool.isRequired};var Z=n(8848),T=n(1381);function L(){var e=(0,o.Z)(y(),2),t=e[0],n=t.isLoading,i=t.transactionStatus,s=e[1];return(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2",children:[(0,r.jsx)(M,{isLoading:n}),(0,r.jsxs)("div",{className:"flex flex-col pr-4 mt-14 lg:mt-24 lg:pt-20 lg:pl-14",children:[(0,r.jsx)("h1",{className:"mb-10 text-5xl text-gray-darkest","data-cy":"header-mint",children:"Mint a New Item"}),(0,r.jsx)(Z.Z,{}),n?(0,r.jsx)(T.Z,{status:i}):(0,r.jsx)(u.C,{onClick:s,disabled:n,roundedFull:!0,children:"Mint Item"})]})]})}var _=n(5143),A=n(1138);function C(){var e=(0,A.Z)(),t=e.isLoggedInAsAdmin,n=e.setShowAdminLoginDialog;return t?(0,r.jsxs)("div",{children:[(0,r.jsx)(_.Z,{children:"Mint"}),(0,r.jsx)("main",{children:(0,r.jsxs)("div",{className:"main-container py-14",children:[(0,r.jsx)(c,{}),(0,r.jsx)(L,{})]})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center mt-14",children:(0,r.jsx)("button",{onClick:function(){n(!0)},"data-cy":"btn-log-in-admin",children:"Log In to Admin View"})})}},5143:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(5893),i=n(9008),s=n.n(i),a=n(5697),c=n.n(a),o=n(4358);function u(e){var t=[e.children,o.Gb].filter(Boolean).join(" - ");return(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{property:"og:title",content:t},"title")]})}u.propTypes={children:c().node}},8848:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893),i=n(5697),s=n.n(i),a=n(4358),c=n(3802);function o(e){var t=e.highlightedRarity;return(0,r.jsxs)("div",{className:"mb-10 text-gray-light text-sm","data-cy":"rarity-scale",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center uppercase font-bold text-xs pb-2 px-2",children:[(0,r.jsx)("div",{children:"Rarity Scale"}),(0,r.jsx)("div",{children:"Minting Chance"})]}),Object.keys(a.nB).reverse().map((function(e){return(0,r.jsxs)("div",{className:"flex items-center border-t border-gray-200 py-1 px-2 ".concat(Number(t)===Number(e)?"bg-gray-200":""),children:[(0,r.jsx)("div",{className:"".concat((0,c.P)(e)," w-2.5 h-2.5 rounded-full mr-3")}),(0,r.jsx)("div",{className:"",children:a.nB[e]}),(0,r.jsxs)("div",{className:"ml-auto text-gray-darkest",children:[a.rR[e],"%"]})]},e)}))]})}o.propTypes={highlightedRarity:s().number}},1381:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),i=n(5697),s=n.n(i),a=n(4358);function c(e){var t=e.status;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white pt-12 pb-11 border border-gray-200 rounded-sm text-gray-lightest text-xs uppercase","data-cy":"tx-loading",children:[(0,r.jsx)("img",{src:"/images/loading.svg",alt:"Flow",width:70,height:70}),(0,r.jsx)("div",{className:"mt-4",children:a.PS[t]||"Initializing"})]})}c.propTypes={status:s().number}},3802:function(e,t,n){"use strict";function r(e){switch(String(e)){case"0":return"item-gradient-0";case"1":return"item-gradient-1";case"2":return"item-gradient-2";case"3":return"item-gradient-3";case"gray":return"item-gradient-gray";default:throw new Error}}function i(e){switch(String(e)){case"0":return"text-blue";case"1":return"text-green-dark";case"2":return"text-purple";case"3":return"text-gold";default:throw new Error}}n.d(t,{H:function(){return i},P:function(){return r}})}},function(e){e.O(0,[774,888,179],(function(){return t=952,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=mint-72e389d4d689d30f.js.map